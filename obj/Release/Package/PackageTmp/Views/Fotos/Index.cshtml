<!-- Index de Fotos -->

@model IEnumerable<Adventure_MVC.Models.tbFotos>

@{
    ViewBag.Title = "Index";
}

<h2 class="page-header panel" style="text-align: center;">Listado De Fotografias</h2>

<p>
    @if (Request.Cookies["MiCookie"] != null)
    {
        @Html.ActionLink("Nueva Foto", "Create", null, htmlAttributes: new { @class = "btn btn-success" })
    }
</p>


<div class="listaImagenes">
    @foreach (var foto in Model)
    {
        <div class="imagen">
            <h2>@foto.titulo</h2>
            <img src="@Url.Content("~/Images/" + foto.pathFoto )" alt="@foto.pathFoto" />
            <p>Creado por: @foto.tbUsuarios.username</p>
            <p>Fecha de creación: @foto.fechaCreacion.ToString("dd/MM/yyyy")</p>
            <p>Fecha de modificación: @foto.fechaModificacion.ToString("dd/MM/yyyy")</p>
            <div class="botones">
                <div class="izquierda">
                    @Html.ActionLink("Detalles", "Detalles", "Fotos", new { id = foto.id }, htmlAttributes: new { @class = "btn btn-primary" })
                </div>
                <div class="derecha">
                    @if (Request.Cookies["MiCookie"] != null)
                    {
                        if (Request.Cookies["MiCookie"]["idUser"] == @foto.id_user.ToString() || Request.Cookies["MiCookie"]["idRol"] == "1")
                        {
//                            @Html.ActionLink("Eliminar", "Delete", "Fotos", new { id = @foto.id }, htmlAttributes: new { @class = "btn btn-danger" })
                            @Html.ActionLink("Eliminar", "Eliminar", "Fotos", new { idFoto = foto.id }, new { @class = "btn btn-danger delete-link", onclick = "return false;" })
                        }
                    }
                </div>
            </div>
        </div>
    }
</div>
